# =============================================================================
# PostgreSQL REPLICA - Configuración para Streaming Replication
# =============================================================================

# Conexiones
listen_addresses = '*'
max_connections = 200

# Replicación (mismo que PRIMARY para posible promoción)
wal_level = replica
max_wal_senders = 10
max_replication_slots = 10
wal_keep_size = 512MB
hot_standby = on

# Hot Standby (consultas en réplica)
hot_standby_feedback = on          # Evitar conflictos de queries con PRIMARY
max_standby_streaming_delay = 30s  # Tiempo máx. para resolver conflictos

# Logging
log_destination = 'stderr'
logging_collector = off
log_statement = 'none'
log_line_prefix = '%t [%p] %u@%d '

# Performance
shared_buffers = 256MB
effective_cache_size = 1GB
maintenance_work_mem = 64MB

# Conexión al PRIMARY (se sobrescribe en standby.signal context)
primary_conninfo = 'host=postgres-primary port=5432 user=replicator password=replicator_pass application_name=replica_1'
primary_slot_name = 'replica_1'
